{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\Michael Chang\\\\dronuts-2019-group-4\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\Michael Chang\\\\dronuts-2019-group-4\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\Michael Chang\\\\dronuts-2019-group-4\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\Michael Chang\\\\dronuts-2019-group-4\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\Michael Chang\\\\dronuts-2019-group-4\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"C:\\\\Users\\\\Michael Chang\\\\dronuts-2019-group-4\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\Michael Chang\\\\dronuts-2019-group-4\\\\client\\\\src\\\\App.js\";\nimport React, { Component } from 'react';\nimport logo from \"./logo.svg\";\nimport './App.css';\nimport Header from \"./components/customer/Header\";\nimport Menu from \"./components/customer/Menu\";\nimport axios from \"axios\";\nvar commerce_id = \"dronuts_group_4\"; //based on https://github.com/sivadass/react-shopping-cart\n\nvar App =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(App, _Component);\n\n  function App() {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this));\n\n    _this.handleAddToCart = function (selectedItems) {\n      var cartItem = _this.state.cart;\n      var itemID = selectedItems.id;\n      var itemQty = selectedItems.quantity;\n\n      if (_this.checkItem(itemID)) {\n        var index = cartItem.findIndex(function (x) {\n          return x.id === itemID;\n        });\n        cartItem[index].quantity = Number(cartItem[index].quantity) + Number(itemQty);\n\n        _this.setState({\n          cart: cartItem\n        });\n      } else {\n        cartItem.push(selectedItems);\n      }\n\n      _this.setState({\n        cart: cartItem\n      });\n\n      setTimeout(function () {\n        this.setState({\n          quantity: 1\n        });\n        console.log(this.state.quantity);\n        console.log(this.state.cart);\n      }.bind(_assertThisInitialized(_this)), 1000);\n\n      _this.sumTotalItems(_this.state.cart);\n\n      _this.sumTotalAmount(_this.state.cart);\n    };\n\n    _this.handleRemoveItem = function (id, e) {\n      var cart = _this.state.cart;\n      var index = cart.findIndex(function (x) {\n        return x.id === id;\n      });\n      cart.splice(index, 1);\n\n      _this.setState({\n        cart: cart\n      });\n\n      _this.sumTotalItems(_this.state.cart);\n\n      _this.sumTotalAmount(_this.state.cart);\n\n      e.preventDefault();\n    };\n\n    _this.checkItem = function (itemID) {\n      var cart = _this.state.cart;\n      return cart.some(function (item) {\n        return item.id === itemID;\n      });\n    };\n\n    _this.sumTotalItems = function () {\n      //const total = 0;\n      var cart = _this.state.cart;\n      var total = cart.length;\n\n      _this.setState({\n        totalItems: total\n      });\n    };\n\n    _this.sumTotalAmount = function () {\n      var total = 0;\n      var cart = _this.state.cart;\n\n      for (var i = 0; i < cart.length; i++) {\n        total += cart[i].price * parseInt(cart[i].quantity);\n      }\n\n      _this.setState({\n        totalAmount: total\n      });\n    };\n\n    _this.updateQuantity = function (qty) {\n      _this.setState({\n        quantity: qty\n      });\n    };\n\n    _this.state = {\n      items: [],\n      cart: [],\n      totalItems: 0,\n      totalAmount: 0,\n      quantity: 1,\n      message: \"Haven't heard from the express server yet..\"\n    };\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {//     fetch('/message')\n      //          .then(res => res.json())\n      //          .then(response => this.setState(response));\n    }\n  }, {\n    key: \"getItems\",\n    value: function getItems() {\n      var _this2 = this;\n\n      var url = \"https://res.cloudinary.com/sivadass/raw/upload/v1535817394/json/products.json\";\n      axios.get(url).then(function (response) {\n        _this2.setState({\n          items: response.data\n        });\n      });\n    }\n  }, {\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      this.getItems();\n    } // Add to Cart\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: \"App\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }, React.createElement(Header, {\n        total: this.state.totalAmount,\n        totalItems: this.state.totalItems,\n        cartItems: this.state.cart,\n        removeItem: this.handleRemoveItem,\n        updateQuantity: this.updateQuantity,\n        itemQuantity: this.state.moq,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }), React.createElement(Menu, {\n        itemsList: this.state.items,\n        addToCart: this.handleAddToCart,\n        itemQuantity: this.state.quantity,\n        updateQuantity: this.updateQuantity,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return App;\n}(Component);\n\nexport default App;","map":{"version":3,"sources":["C:\\Users\\Michael Chang\\dronuts-2019-group-4\\client\\src\\App.js"],"names":["React","Component","Header","Menu","axios","commerce_id","App","handleAddToCart","selectedItems","cartItem","state","cart","itemID","id","itemQty","quantity","checkItem","index","findIndex","x","Number","setState","push","setTimeout","console","log","bind","sumTotalItems","sumTotalAmount","handleRemoveItem","e","splice","preventDefault","some","item","total","length","totalItems","i","price","parseInt","totalAmount","updateQuantity","qty","items","message","url","get","then","response","data","getItems","moq"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport logo from './logo.svg';\r\nimport './App.css';\r\nimport Header from \"./components/customer/Header\";\r\nimport Menu from \"./components/customer/Menu\";\r\nimport axios from \"axios\";\r\n\r\nvar commerce_id = \"dronuts_group_4\";\r\n//based on https://github.com/sivadass/react-shopping-cart\r\nclass App extends Component {\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.state = {\r\n\t\t\titems: [],\r\n\t\t\tcart: [],\r\n\t\t\ttotalItems: 0,\r\n\t\t\ttotalAmount: 0,\r\n\t\t\tquantity: 1,\r\n               message: \"Haven't heard from the express server yet..\"\r\n\t\t}\r\n\t}\r\n\r\n     componentDidMount() {\r\n//     fetch('/message')\r\n//          .then(res => res.json())\r\n//          .then(response => this.setState(response));\r\n     }\r\n\r\n\t\t\r\n\tgetItems() {\r\n\t    const url =\r\n\t      \"https://res.cloudinary.com/sivadass/raw/upload/v1535817394/json/products.json\";\r\n\t    axios.get(url).then(response => {\r\n\t      this.setState({\r\n\t        items: response.data\r\n\t      });\r\n\t    });\r\n    }\r\n\r\n\tcomponentWillMount() {\r\n\t\tthis.getItems();\r\n\t}\r\n\r\n     // Add to Cart\r\n    handleAddToCart = (selectedItems) => {\r\n     \tconst cartItem = this.state.cart;\r\n     \tconst itemID = selectedItems.id;\r\n     \tconst itemQty = selectedItems.quantity;\r\n     \tif (this.checkItem(itemID)) {\r\n     \t\tlet index = cartItem.findIndex(x => x.id === itemID);\r\n     \t\tcartItem[index].quantity =\r\n     \t\tNumber(cartItem[index].quantity) + Number(itemQty);\r\n     \t\tthis.setState({\r\n     \t\t\tcart: cartItem\r\n     \t\t});\r\n     \t} else {\r\n     \t\tcartItem.push(selectedItems);\r\n     \t}\r\n     \tthis.setState({\r\n     \t\tcart: cartItem,\r\n     \t});\r\n     \tsetTimeout(\r\n     \t\tfunction() {\r\n     \t\t\tthis.setState({\r\n     \t\t\t\tquantity: 1\r\n     \t\t\t});\r\n     \t\t\tconsole.log(this.state.quantity);\r\n     \t\t\tconsole.log(this.state.cart);\r\n     \t\t}.bind(this),\r\n     \t\t1000\r\n     \t\t);\r\n     \tthis.sumTotalItems(this.state.cart);\r\n     \tthis.sumTotalAmount(this.state.cart);\r\n     }\r\n     handleRemoveItem = (id, e) => {\r\n     \tconst cart = this.state.cart;\r\n     \tconst index = cart.findIndex(x => x.id === id);\r\n     \tcart.splice(index, 1);\r\n     \tthis.setState({\r\n     \t\tcart: cart\r\n     \t});\r\n     \tthis.sumTotalItems(this.state.cart);\r\n     \tthis.sumTotalAmount(this.state.cart);\r\n     \te.preventDefault();\r\n     }\r\n\r\n     checkItem = (itemID) => {\r\n     \tconst cart = this.state.cart;\r\n     \treturn cart.some(function(item) {\r\n     \t\treturn item.id === itemID;\r\n     \t});\r\n     }\r\n     sumTotalItems = () => {\r\n     \t//const total = 0;\r\n     \tconst cart = this.state.cart;\r\n     \tconst total = cart.length;\r\n     \tthis.setState({\r\n     \t\ttotalItems: total\r\n     \t});\r\n     }\r\n     sumTotalAmount = () => {\r\n     \tvar total = 0;\r\n     \tconst cart = this.state.cart;\r\n     \tfor (var i = 0; i < cart.length; i++) {\r\n     \t\ttotal += cart[i].price * parseInt(cart[i].quantity);\r\n     \t}\r\n     \tthis.setState({\r\n     \t\ttotalAmount: total\r\n     \t});\r\n     }\r\n\r\n\t//Reset Quantity\r\n\tupdateQuantity = (qty) => {\r\n\t\tthis.setState({\r\n\t\t\tquantity: qty\r\n\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n               <div className=\"App\">\r\n\t\t\t<div className=\"container\">\r\n\t\t\t<Header\r\n\t\t\ttotal={this.state.totalAmount}\r\n\t\t\ttotalItems={this.state.totalItems}\r\n\t\t\tcartItems={this.state.cart}\r\n\t\t\tremoveItem={this.handleRemoveItem}\r\n\t\t\tupdateQuantity={this.updateQuantity}\r\n\t\t\titemQuantity={this.state.moq}\r\n\t\t\t/>\r\n\t\t\t<Menu\r\n\t\t\titemsList={this.state.items}\r\n\t\t\taddToCart={this.handleAddToCart}\r\n\t\t\titemQuantity={this.state.quantity}\r\n\t\t\tupdateQuantity={this.updateQuantity}\r\n\t\t\t/>\r\n\t\t\t</div>\r\n               </div>\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\r\n\texport default App;\r\n"]},"metadata":{},"sourceType":"module"}